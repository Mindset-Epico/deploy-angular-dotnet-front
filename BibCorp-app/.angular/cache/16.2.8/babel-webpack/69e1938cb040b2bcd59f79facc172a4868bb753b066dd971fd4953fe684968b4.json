{"ast":null,"code":"import { formatDate } from \"@angular/common\";\nimport { GerenciamentoEmprestimo, TipoAcaoEmprestimo } from \"src/app/emprestimos/models/emprestimo/GerenciamentoEmprestimo\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"ngx-spinner\";\nimport * as i3 from \"ngx-toastr\";\nimport * as i4 from \"src/app/emprestimos\";\nfunction GerenciarSolicitacoesComponent_tr_37_button_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function GerenciarSolicitacoesComponent_tr_37_button_25_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const emprestimo_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.gerenciarEmprestimo(emprestimo_r2.id, \"Aprovar\"));\n    });\n    i0.ɵɵtext(1, \"Aprovar\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction GerenciarSolicitacoesComponent_tr_37_button_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function GerenciarSolicitacoesComponent_tr_37_button_27_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const emprestimo_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.gerenciarEmprestimo(emprestimo_r2.id, \"Recusar\"));\n    });\n    i0.ɵɵtext(1, \"Recusar\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction GerenciarSolicitacoesComponent_tr_37_button_29_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function GerenciarSolicitacoesComponent_tr_37_button_29_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const emprestimo_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.gerenciarEmprestimo(emprestimo_r2.id, \"Devolver\"));\n    });\n    i0.ɵɵtext(1, \"Devolu\\u00E7\\u00E3o\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction GerenciarSolicitacoesComponent_tr_37_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\")(2, \"img\", 13);\n    i0.ɵɵlistener(\"ngbCollapseChange\", function GerenciarSolicitacoesComponent_tr_37_Template_img_ngbCollapseChange_2_listener($event) {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(!(ctx_r16.exibirImagem = $event));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"td\");\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\");\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"td\")(24, \"div\", 14);\n    i0.ɵɵtemplate(25, GerenciarSolicitacoesComponent_tr_37_button_25_Template, 2, 0, \"button\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"div\", 14);\n    i0.ɵɵtemplate(27, GerenciarSolicitacoesComponent_tr_37_button_27_Template, 2, 0, \"button\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"div\", 14);\n    i0.ɵɵtemplate(29, GerenciarSolicitacoesComponent_tr_37_button_29_Template, 2, 0, \"button\", 17);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const emprestimo_r2 = ctx.$implicit;\n    const i_r3 = ctx.index;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"width\", 50, \"px\")(\"margin\", 2, \"px\");\n    i0.ɵɵpropertyInterpolate(\"src\", emprestimo_r2.acervo.capaUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵproperty(\"ngbCollapse\", !ctx_r0.exibirImagem);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r3 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(emprestimo_r2.acervo.titulo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(emprestimo_r2.localDeEntrega);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(emprestimo_r2.userName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.formatarData(emprestimo_r2.dataEmprestimo));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(emprestimo_r2.patrimonio.sala);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(emprestimo_r2.patrimonio.prateleira);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(emprestimo_r2.patrimonio.coluna);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(emprestimo_r2.patrimonio.posicao);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.obterStatus(emprestimo_r2.status));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", emprestimo_r2.status == 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", emprestimo_r2.status == 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", emprestimo_r2.status == 2 || emprestimo_r2.status == 4);\n  }\n}\nfunction GerenciarSolicitacoesComponent_td_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 21)(1, \"h6\");\n    i0.ɵɵtext(2, \"N\\u00E3o foram encontrados empr\\u00E9stimos pendentes de atua\\u00E7\\u00E3o\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let GerenciarSolicitacoesComponent = /*#__PURE__*/(() => {\n  var _class;\n  class GerenciarSolicitacoesComponent {\n    constructor(router, spinnerService, toastrService, emprestimoService) {\n      this.router = router;\n      this.spinnerService = spinnerService;\n      this.toastrService = toastrService;\n      this.emprestimoService = emprestimoService;\n      this.exibirImagem = true;\n      this.emprestimos = [];\n    }\n    ngOnInit() {\n      this.getEmprestimosPendentes();\n      this.gerenciamentoEmprestimo = new GerenciamentoEmprestimo();\n    }\n    editarAcervo(acerovId) {\n      this.router.navigate([`acervos/edicao/${acerovId}`]);\n    }\n    alterarImagem() {\n      this.exibirImagem = !this.exibirImagem;\n    }\n    alteracaoDePagina(event) {\n      //    this.pagination.currentPage = event.currentPage\n    }\n    getEmprestimosPendentes() {\n      this.spinnerService.show();\n      this.statusPendentesDeAtuacao = [\"Reservado\", \"Emprestado\", \"Renovado\"];\n      this.emprestimoService.getEmprestimosPendentes(this.statusPendentesDeAtuacao).subscribe(retorno => {\n        this.emprestimos = retorno;\n      }, error => {\n        this.toastrService.error(\"Erro ao buscar os empréstimos pendentes de atuação\", \"Erro!\");\n        console.error(error);\n      }).add(() => this.spinnerService.hide());\n    }\n    obterStatus(emprestimoStatus) {\n      if (emprestimoStatus === 1) {\n        return \"Aguardando aprovação\";\n      } else if (emprestimoStatus === 2 || emprestimoStatus === 4) {\n        return \"Aguardando devolução\";\n      } else if (emprestimoStatus === 3 || emprestimoStatus === 5) {\n        return \"Solicitação concluída\";\n      }\n    }\n    formatarData(data) {\n      var dataFormatada = formatDate(data, \"dd/MM/YYYY\", \"en-US\");\n      return dataFormatada;\n    }\n    gerenciarEmprestimo(emprestimoId, acao) {\n      this.spinnerService.show();\n      if (acao === \"Aprovar\") {\n        console.log(this.gerenciamentoEmprestimo);\n        this.gerenciamentoEmprestimo.acao = TipoAcaoEmprestimo.Aprovar;\n      } else if (acao === \"Recusar\") {\n        this.gerenciamentoEmprestimo.acao = TipoAcaoEmprestimo.Recusar;\n      } else if (acao === \"Devolver\") {\n        this.gerenciamentoEmprestimo.acao = TipoAcaoEmprestimo.Devolver;\n      }\n      this.emprestimoService.gerenciarEmprestimo(emprestimoId, this.gerenciamentoEmprestimo).subscribe(retorno => {\n        this.emprestimoAlterado = retorno;\n        this.ngOnInit();\n      }, error => {\n        this.toastrService.error(\"Erro ao gerenciar o empréstimo\", \"Erro!\");\n        console.error(error);\n      }).add(() => this.spinnerService.hide());\n    }\n  }\n  _class = GerenciarSolicitacoesComponent;\n  _class.ɵfac = function GerenciarSolicitacoesComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.NgxSpinnerService), i0.ɵɵdirectiveInject(i3.ToastrService), i0.ɵɵdirectiveInject(i4.EmprestimoService));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-gerenciar-solicitacoes\"]],\n    decls: 43,\n    vars: 4,\n    consts: [[3, \"title\"], [\"type\", \"button\", \"routerLinkActive\", \"active\", 1, \"btn\", \"btn-no-bg\", \"text-start\", \"mt-2\", \"ms-3\"], [\"routerLink\", \"/home-admin\", 1, \"mr-2\"], [1, \"table-responsive\"], [2, \"min-height\", \"500px\"], [1, \"table\", \"table-striped\", \"table-hover\", \"table-light\", \"rounded-3\"], [1, \"table-primary\"], [1, \"d-none\", \"d-md-table-cell\", \"d-flex\", \"justify-center\"], [1, \"text-white\", 3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [\"colspan\", \"12\", \"class\", \"text-center\", 4, \"ngIf\"], [\"bdColor\", \"rgba(51,51,51,0.8)\", \"size\", \"medium\", \"color\", \"#fff\", \"type\", \"square-jelly-box\"], [2, \"font-size\", \"20px\", \"color\", \"white\"], [\"alt\", \"Capa do livro\", 3, \"ngbCollapse\", \"src\", \"ngbCollapseChange\"], [1, \"btn-group\", \"mx-1\"], [\"class\", \"aprovar\", \"matTooltip\", \"Aprovar solicita\\u00E7\\u00E3o\", \"style\", \"color: white;\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"recusar\", \"matTooltip\", \"Recusar solicita\\u00E7\\u00E3o\", \"style\", \"color: white;\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"devolver\", \"matTooltip\", \"Acusar recebimento\", \"style\", \"color: white;\", 3, \"click\", 4, \"ngIf\"], [\"matTooltip\", \"Aprovar solicita\\u00E7\\u00E3o\", 1, \"aprovar\", 2, \"color\", \"white\", 3, \"click\"], [\"matTooltip\", \"Recusar solicita\\u00E7\\u00E3o\", 1, \"recusar\", 2, \"color\", \"white\", 3, \"click\"], [\"matTooltip\", \"Acusar recebimento\", 1, \"devolver\", 2, \"color\", \"white\", 3, \"click\"], [\"colspan\", \"12\", 1, \"text-center\"]],\n    template: function GerenciarSolicitacoesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"app-titlebar\", 0)(1, \"router-outlet\");\n        i0.ɵɵelementStart(2, \"button\", 1)(3, \"span\", 2);\n        i0.ɵɵtext(4, \"\\u2190 Voltar\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 3)(6, \"div\", 4)(7, \"table\", 5)(8, \"thead\", 6)(9, \"tr\")(10, \"th\", 7)(11, \"a\", 8);\n        i0.ɵɵlistener(\"click\", function GerenciarSolicitacoesComponent_Template_a_click_11_listener() {\n          return ctx.alterarImagem();\n        });\n        i0.ɵɵelementStart(12, \"mat-icon\");\n        i0.ɵɵtext(13);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(14, \"th\");\n        i0.ɵɵtext(15, \"#\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"th\");\n        i0.ɵɵtext(17, \"T\\u00EDtulo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"th\");\n        i0.ɵɵtext(19, \"Destino\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"th\");\n        i0.ɵɵtext(21, \"Usu\\u00E1rio\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"th\");\n        i0.ɵɵtext(23, \"Data da solicita\\u00E7\\u00E3o\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"th\");\n        i0.ɵɵtext(25, \"Sala\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"th\");\n        i0.ɵɵtext(27, \"Prateleira\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"th\");\n        i0.ɵɵtext(29, \"Coluna\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"th\");\n        i0.ɵɵtext(31, \"Posi\\u00E7\\u00E3o\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"th\");\n        i0.ɵɵtext(33, \"Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"th\");\n        i0.ɵɵtext(35, \"Op\\u00E7\\u00F5es\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(36, \"tbody\");\n        i0.ɵɵtemplate(37, GerenciarSolicitacoesComponent_tr_37_Template, 30, 19, \"tr\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"tfoot\");\n        i0.ɵɵtemplate(39, GerenciarSolicitacoesComponent_td_39_Template, 3, 0, \"td\", 10);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(40, \"ngx-spinner\", 11)(41, \"p\", 12);\n        i0.ɵɵtext(42, \"Carregando...\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"title\", \"Gerenciamento de empr\\u00E9stimos\");\n        i0.ɵɵadvance(13);\n        i0.ɵɵtextInterpolate(ctx.exibirImagem ? \"visibility\" : \"visibility_on\");\n        i0.ɵɵadvance(24);\n        i0.ɵɵproperty(\"ngForOf\", ctx.emprestimos);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.emprestimos.length);\n      }\n    },\n    styles: [\".aprovar[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border-radius:8px;height:30%;width:75px;text-align:center;text-decoration:none;border-color:#4caf50;margin-top:8px}.recusar[_ngcontent-%COMP%]{background-color:#ff5733;color:#fff;border-radius:8px;height:30px;width:75px;text-align:center;text-decoration:none;border-color:#ff5733;margin-top:2px}.devolver[_ngcontent-%COMP%]{background-color:#00bfff;color:#fff;border-radius:8px;height:30px;width:90px;text-align:center;text-decoration:none;border-color:#00bfff;margin-top:25px}\"]\n  });\n  return GerenciarSolicitacoesComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}