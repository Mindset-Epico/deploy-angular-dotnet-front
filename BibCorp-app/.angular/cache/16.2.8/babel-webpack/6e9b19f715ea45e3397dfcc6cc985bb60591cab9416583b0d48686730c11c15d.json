{"ast":null,"code":"import { Validators } from \"@angular/forms\";\nimport { FormValidator } from \"src/app/util\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../..\";\nimport * as i4 from \"ngx-spinner\";\nimport * as i5 from \"ngx-toastr\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/datepicker\";\nimport * as i8 from \"@angular/material/form-field\";\nimport * as i9 from \"@angular/material/input\";\nfunction PatrimonioDetalheComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 31)(1, \"div\", 12);\n    i0.ɵɵtext(2, \" Dados de Controle \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 13)(4, \"mat-form-field\", 32)(5, \"mat-label\");\n    i0.ɵɵtext(6, \"Patrim\\u00F4nio Id:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"input\", 33);\n    i0.ɵɵelementStart(8, \"mat-error\", 16);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"mat-form-field\", 34)(11, \"mat-label\");\n    i0.ɵɵtext(12, \"Situa\\u00E7\\u00E3o:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"input\", 35);\n    i0.ɵɵlistener(\"class\", function PatrimonioDetalheComponent_div_15_Template_input_class_13_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.ctrF.statusTela == \"Liberado\" ? \"text-success\" : \"text-danger\");\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"mat-error\", 16);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"mat-form-field\", 34)(17, \"mat-label\");\n    i0.ɵɵtext(18, \"Data Cadastro:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(19, \"input\", 36)(20, \"mat-datepicker-toggle\", 37)(21, \"mat-datepicker\", 38, 39);\n    i0.ɵɵelementStart(23, \"mat-error\", 16);\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"mat-form-field\", 34)(26, \"mat-label\");\n    i0.ɵɵtext(27, \"Data Atualiza\\u00E7\\u00E3o:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(28, \"input\", 40)(29, \"mat-datepicker-toggle\", 37)(30, \"mat-datepicker\", 38, 41);\n    i0.ɵɵelementStart(32, \"mat-error\", 16);\n    i0.ɵɵtext(33);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(34, \"div\", 13)(35, \"mat-form-field\", 34)(36, \"mat-label\");\n    i0.ɵɵtext(37, \"Data Empr\\u00E9stimo:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(38, \"input\", 42)(39, \"mat-datepicker-toggle\", 37)(40, \"mat-datepicker\", 38, 43);\n    i0.ɵɵelementStart(42, \"mat-error\", 16);\n    i0.ɵɵtext(43);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const _r1 = i0.ɵɵreference(22);\n    const _r2 = i0.ɵɵreference(31);\n    const _r3 = i0.ɵɵreference(41);\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngClass\", ctx_r0.fieldValidator(ctx_r0.ctrF.patrimonioId));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.messageReturned(ctx_r0.ctrF.patrimonioId, \"\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngClass\", ctx_r0.fieldValidator(ctx_r0.ctrF.statusTela));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.messageReturned(ctx_r0.ctrF.statusTela, \"\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"matDatepicker\", _r1)(\"ngClass\", ctx_r0.fieldValidator(ctx_r0.ctrF.dataCadastro));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", _r1);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.messageReturned(ctx_r0.ctrF.dataCadastro, \"\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"matDatepicker\", _r2)(\"ngClass\", ctx_r0.fieldValidator(ctx_r0.ctrF.dataAtualizacao));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", _r2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.messageReturned(ctx_r0.ctrF.dataAtualizacao, \"\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"matDatepicker\", _r3)(\"ngClass\", ctx_r0.fieldValidator(ctx_r0.ctrF.dataIndisponibilidade));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"for\", _r3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r0.messageReturned(ctx_r0.ctrF.dataIndisponibilidade, \"\"));\n  }\n}\nexport let PatrimonioDetalheComponent = /*#__PURE__*/(() => {\n  var _class;\n  class PatrimonioDetalheComponent {\n    get ctrF() {\n      return this.formPatrimonio.controls;\n    }\n    constructor(activevateRouter, formBuilder, patrimonioService, router, spinnerService, toastrService) {\n      this.activevateRouter = activevateRouter;\n      this.formBuilder = formBuilder;\n      this.patrimonioService = patrimonioService;\n      this.router = router;\n      this.spinnerService = spinnerService;\n      this.toastrService = toastrService;\n      this.patrimonioParam = \"\";\n      this.editMode = false;\n      this.capaPatrimonio = \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSAvSXCxMVWmCqcYHAvsrPZXmy2OkBeGy1-fbuCX2yfV5duFlE84Bk7C_APCxidn5u9cE0&usqp=CAU\";\n    }\n    ngOnInit() {\n      this.patrimonioParam = this.activevateRouter.snapshot.paramMap.get(\"id\");\n      this.editMode = this.patrimonioParam != null ? true : false;\n      this.formValidator();\n      if (this.editMode) this.getPatrimonio();\n    }\n    formValidator() {\n      this.formPatrimonio = this.formBuilder.group({\n        patrimonioId: [\"\"],\n        isbn: [\"\", [Validators.required, Validators.minLength(10), Validators.maxLength(13)]],\n        localizacao: [\"\"],\n        sala: [\"\"],\n        coluna: [\"\"],\n        prateleira: [\"\"],\n        posicao: [\"\"],\n        dataCadastro: [\"\"],\n        dataAtualizacao: [\"\"],\n        dataIndisponibilidade: [\"\"],\n        statusTela: [!this.editMode ? \"Liberado\" : \"\"]\n      });\n    }\n    fieldValidator(campoForm) {\n      return FormValidator.checkFieldsWhithError(campoForm);\n    }\n    messageReturned(nomeCampo, nomeElemento) {\n      return FormValidator.returnMessage(nomeCampo, nomeElemento);\n    }\n    clearForm() {\n      this.formPatrimonio.reset();\n    }\n    saveChange() {\n      if (this.formPatrimonio.valid) if (!this.editMode) {\n        this.novoPatrimonio();\n      } else {\n        this.salvarPatrimonio();\n      }\n    }\n    getPatrimonio() {\n      this.spinnerService.show();\n      this.patrimonioService.getPatrimonioById(+this.patrimonioParam).subscribe(patrimonio => {\n        this.patrimonio = patrimonio;\n        this.formPatrimonio.patchValue(this.patrimonio);\n        this.ctrF.patrimonioId.setValue(this.patrimonio.id);\n        this.ctrF.statusTela.setValue(this.patrimonio.status ? \"Emprestado\" : \"Liberado\");\n        if (patrimonio.acervo?.capaUrl) this.capaPatrimonio = patrimonio.acervo.capaUrl;\n        console.log(patrimonio);\n      }, error => {\n        this.toastrService.error(\"Falha ao recuperar Patrimonio\", \"Erro!\");\n        console.error(error);\n      }).add(() => this.spinnerService.hide());\n    }\n    novoPatrimonio() {\n      this.spinnerService.show();\n      this.patrimonio = {\n        ...this.formPatrimonio.value\n      };\n      this.patrimonio.status = false;\n      this.patrimonio.dataAtualizacao = new Date().toISOString();\n      this.patrimonio.dataCadastro = new Date().toISOString();\n      this.patrimonioService.createPatrimonio(this.patrimonio).subscribe(novoPatrimonio => {\n        this.toastrService.success(\"Patrimonio cadastrado!\", \"Sucesso!\");\n        window.location.reload;\n        this.router.navigateByUrl(`/patrimonios/detalhe/${novoPatrimonio.id}`);\n      }, error => {\n        this.toastrService.error(\"Erro ao cadastrar Patrimônio\", \"Erro!\");\n        console.error(error);\n      }).add(() => this.spinnerService.hide());\n    }\n    salvarPatrimonio() {\n      this.spinnerService.show();\n      this.patrimonio = {\n        id: this.ctrF.patrimonioId.value,\n        ...this.formPatrimonio.value\n      };\n      this.patrimonio.dataCadastro = new Date().toISOString();\n      console.log(this.patrimonio);\n      this.patrimonioService.savePatrimonio(this.patrimonio).subscribe(patrimonio => {\n        this.toastrService.success(\"Patrimônio Atualizado!\", \"Sucesso!\");\n      }, error => {\n        this.toastrService.error(\"Falha ao atualizar Patrimônio.\", \"Erro!\");\n        console.error(error);\n      }).add(() => this.spinnerService.hide());\n    }\n  }\n  _class = PatrimonioDetalheComponent;\n  _class.ɵfac = function PatrimonioDetalheComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.PatrimonioService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i4.NgxSpinnerService), i0.ɵɵdirectiveInject(i5.ToastrService));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-patrimonioDetalhe\"]],\n    decls: 67,\n    vars: 17,\n    consts: [[1, \"container-fluid\", \"mt-0\", \"ms-0\", \"pt-0\", \"ps-0\"], [\"type\", \"button\", \"routerLinkActive\", \"active\", \"routerLink\", \"/home-admin\", 1, \"btn\", \"btn-no-bg\", \"text-start\", \"mt-2\", \"ms-3\"], [1, \"mr-2\"], [1, \"container-fluid\", \"mt-2\", 3, \"formGroup\"], [1, \"card\", \"rounded\", \"shadow\"], [1, \"card-header\", \"rounded\", \"text-center\", \"text-white\", \"bibcorp-bg-secondary\", \"p-3\"], [1, \"h3\"], [1, \"card-body\", \"p-0\", \"mt-1\", \"bg-white\", \"text-black\"], [1, \"row\", \"m-0\", \"p-9\"], [1, \"col-md-8\"], [1, \"h4\", \"border-bottom\", \"mt-2\"], [\"class\", \"card bibcorp-bg-white2 text-black p-2\", 4, \"ngIf\"], [1, \"h7\", \"mt-2\"], [1, \"form-row\", \"d-md-flex\"], [\"appearance\", \"fill\", 1, \"col-md-4\", \"p-1\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"isbn\", 3, \"ngClass\"], [1, \"invalid-feedback\"], [\"appearance\", \"fill\", 1, \"col-md-8\", \"p-1\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"localizacao\", 3, \"ngClass\"], [\"appearance\", \"fill\", 1, \"col-md-3\", \"p-1\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"sala\", 3, \"ngClass\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"coluna\", 3, \"ngClass\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"prateleira\", 3, \"ngClass\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"posicao\", 3, \"ngClass\"], [1, \"col-md-4\", \"mt-5\"], [1, \"aligns-self-center\", \"text-center\"], [\"alt\", \"Card imagem upload imageDetail\", 1, \"imageDetail\", 3, \"src\"], [1, \"card-footer\", \"bibcorp-bg-secondary\", \"mt-1\"], [1, \"d-flex\"], [1, \"btn\", \"btn-danger\", \"ms-auto\", \"mx-1\", 3, \"click\"], [1, \"btn\", \"btn-primary\", \"mx-1\", \"px-4\", 3, \"disabled\", \"click\"], [1, \"card\", \"bibcorp-bg-white2\", \"text-black\", \"p-2\"], [\"appearance\", \"outline\", \"disabled\", \"\", 1, \"col-md-3\", \"p-1\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"patrimonioId\", \"readonly\", \"\", 3, \"ngClass\"], [\"appearance\", \"outline\", 1, \"col-md-3\", \"p-1\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"statusTela\", \"readonly\", \"\", 3, \"ngClass\", \"class\"], [\"matInput\", \"\", \"formControlName\", \"dataCadastro\", \"readonly\", \"\", 3, \"matDatepicker\", \"ngClass\"], [\"matIconSuffix\", \"\", 1, \"text-info\", 3, \"for\"], [\"disabled\", \"true\"], [\"dataCadastro\", \"\"], [\"matInput\", \"\", \"formControlName\", \"dataAtualizacao\", \"readonly\", \"\", 3, \"matDatepicker\", \"ngClass\"], [\"dataAtualizacao\", \"\"], [\"matInput\", \"\", \"formControlName\", \"dataIndisponibilidade\", \"readonly\", \"\", 3, \"matDatepicker\", \"ngClass\"], [\"dataIndisponibilidade\", \"\"]],\n    template: function PatrimonioDetalheComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1)(2, \"span\", 2);\n        i0.ɵɵtext(3, \"\\u2190\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(4, \" Voltar \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"form\", 3)(6, \"div\", 4)(7, \"div\", 5)(8, \"div\", 6);\n        i0.ɵɵtext(9, \" Formul\\u00E1rio de Patrim\\u00F4nios \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(10, \"div\", 7)(11, \"div\", 8)(12, \"div\", 9)(13, \"div\", 10);\n        i0.ɵɵtext(14, \" Dados do Patrim\\u00F4nio \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(15, PatrimonioDetalheComponent_div_15_Template, 44, 16, \"div\", 11);\n        i0.ɵɵelementStart(16, \"div\", 12);\n        i0.ɵɵtext(17, \" Dados de Cadastro \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 13)(19, \"mat-form-field\", 14)(20, \"mat-label\");\n        i0.ɵɵtext(21, \"N\\u00FAmero ISBN:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(22, \"input\", 15);\n        i0.ɵɵelementStart(23, \"mat-error\", 16);\n        i0.ɵɵtext(24);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(25, \"mat-form-field\", 17)(26, \"mat-label\");\n        i0.ɵɵtext(27, \"Localiza\\u00E7\\u00E3o:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(28, \"input\", 18);\n        i0.ɵɵelementStart(29, \"mat-error\", 16);\n        i0.ɵɵtext(30);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(31, \"div\", 13);\n        i0.ɵɵelementStart(32, \"div\", 13)(33, \"mat-form-field\", 19)(34, \"mat-label\");\n        i0.ɵɵtext(35, \"Sala:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(36, \"input\", 20);\n        i0.ɵɵelementStart(37, \"mat-error\", 16);\n        i0.ɵɵtext(38);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(39, \"mat-form-field\", 19)(40, \"mat-label\");\n        i0.ɵɵtext(41, \"Coluna:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(42, \"input\", 21);\n        i0.ɵɵelementStart(43, \"mat-error\", 16);\n        i0.ɵɵtext(44);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(45, \"mat-form-field\", 19)(46, \"mat-label\");\n        i0.ɵɵtext(47, \"Prateleira:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(48, \"input\", 22);\n        i0.ɵɵelementStart(49, \"mat-error\", 16);\n        i0.ɵɵtext(50);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(51, \"mat-form-field\", 19)(52, \"mat-label\");\n        i0.ɵɵtext(53, \"Posi\\u00E7\\u00E3o:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(54, \"input\", 23);\n        i0.ɵɵelementStart(55, \"mat-error\", 16);\n        i0.ɵɵtext(56);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(57, \"div\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(58, \"div\", 24)(59, \"div\", 25);\n        i0.ɵɵelement(60, \"img\", 26);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(61, \"div\", 27)(62, \"div\", 28)(63, \"button\", 29);\n        i0.ɵɵlistener(\"click\", function PatrimonioDetalheComponent_Template_button_click_63_listener() {\n          return ctx.clearForm();\n        });\n        i0.ɵɵtext(64, \" Cancelar \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(65, \"button\", 30);\n        i0.ɵɵlistener(\"click\", function PatrimonioDetalheComponent_Template_button_click_65_listener() {\n          return ctx.saveChange();\n        });\n        i0.ɵɵtext(66);\n        i0.ɵɵelementEnd()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"formGroup\", ctx.formPatrimonio);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngIf\", ctx.editMode);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngClass\", ctx.fieldValidator(ctx.ctrF.isbn));\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.messageReturned(ctx.ctrF.isbn, \"\"));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngClass\", ctx.fieldValidator(ctx.ctrF.localizacao));\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.messageReturned(ctx.ctrF.localizacao, \"\"));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngClass\", ctx.fieldValidator(ctx.ctrF.sala));\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.messageReturned(ctx.ctrF.sala, \"\"));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngClass\", ctx.fieldValidator(ctx.ctrF.coluna));\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.messageReturned(ctx.ctrF.coluna, \"\"));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngClass\", ctx.fieldValidator(ctx.ctrF.prateleira));\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.messageReturned(ctx.ctrF.prateleira, \"\"));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngClass\", ctx.fieldValidator(ctx.ctrF.posicao));\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.messageReturned(ctx.ctrF.posicao, \"\"));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"src\", ctx.capaPatrimonio, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"disabled\", !ctx.formPatrimonio.valid);\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\" \", ctx.editMode ? \"Salvar\" : \"Criar\", \" \");\n      }\n    },\n    dependencies: [i1.RouterLink, i1.RouterLinkActive, i6.NgClass, i6.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i7.MatDatepicker, i7.MatDatepickerInput, i7.MatDatepickerToggle, i8.MatFormField, i8.MatLabel, i8.MatError, i8.MatSuffix, i9.MatInput, i2.FormGroupDirective, i2.FormControlName]\n  });\n  return PatrimonioDetalheComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}