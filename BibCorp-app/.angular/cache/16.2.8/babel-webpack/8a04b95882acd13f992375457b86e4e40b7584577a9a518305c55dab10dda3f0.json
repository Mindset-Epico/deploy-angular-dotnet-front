{"ast":null,"code":"import { MAT_DIALOG_DATA } from \"@angular/material/dialog\";\nimport { formatDate } from \"@angular/common\";\nimport { ModalSucessoComponent } from \"../renovacao\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"src/app/emprestimos\";\nimport * as i3 from \"ngx-spinner\";\nimport * as i4 from \"ngx-toastr\";\nexport let ModalRenovarComponent = /*#__PURE__*/(() => {\n  var _class;\n  class ModalRenovarComponent {\n    constructor(dialog, dataInput, emprestimoService, spinnerService, toastrService) {\n      this.dialog = dialog;\n      this.dataInput = dataInput;\n      this.emprestimoService = emprestimoService;\n      this.spinnerService = spinnerService;\n      this.toastrService = toastrService;\n      this.title = \"angular-material\";\n      this.emprestimoIdParam = \"\";\n      this.acervoTituloParam = \"\";\n      this.dataPrevistaDevolucaoParam = \"\";\n      this.emprestimo = {};\n    }\n    ngOnInit() {\n      this.emprestimoIdParam = this.dataInput.emprestimoId;\n      this.acervoTituloParam = this.dataInput.acervoTitulo;\n      this.dataPrevistaDevolucaoParam = this.dataInput.dataPrevistaDevolucao;\n    }\n    fecharModalRenovarEAbrirModalSucesso() {\n      const dialogRefAlterar = this.dataInput.id;\n      if (dialogRefAlterar) {\n        this.dialog.closeAll();\n      }\n      this.dialog.open(ModalSucessoComponent, {\n        data: {\n          emprestimoId: this.emprestimoIdParam\n        },\n        id: \"Sucesso\"\n      });\n    }\n    renovarEmprestimo() {\n      this.spinnerService.show();\n      this.emprestimoService.renovarEmprestimo(this.emprestimoIdParam).subscribe(() => {\n        this.fecharModalRenovarEAbrirModalSucesso();\n      }, error => {\n        if (error.status === 400 && error.error == \"Renovação não permitida pois o empréstimo já foi renovado anteriormente\") {\n          this.toastrService.error(\"Não será possível realizar a renovação solicitada pois o empréstimo já foi renovado anteriormente\");\n        } else if (error.status === 500) {\n          this.toastrService.error(\"Ocorreu um erro ao tentar renovar o empréstimo\");\n        }\n      }).add(() => this.spinnerService.hide());\n    }\n    formatarData(data) {\n      var dataFormatada = formatDate(data, \"dd/MM/YYYY\", \"en-US\");\n      return dataFormatada;\n    }\n  }\n  _class = ModalRenovarComponent;\n  _class.ɵfac = function ModalRenovarComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i2.EmprestimoService), i0.ɵɵdirectiveInject(i3.NgxSpinnerService), i0.ɵɵdirectiveInject(i4.ToastrService));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-modal-renovar\"]],\n    decls: 22,\n    vars: 2,\n    consts: [[\"id\", \"Renovar\", 1, \"modal-content-vertical-large\"], [\"role\", \"document\", 1, \"modal-dialog\"], [1, \"titulo\"], [1, \"orientacao\"], [1, \"info\"], [2, \"text-align\", \"left\"], [1, \"book-info\"], [1, \"modal-footer\", 2, \"text-align\", \"center\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-orange\", \"reserve-button\", 2, \"margin-top\", \"auto\", 3, \"click\"]],\n    template: function ModalRenovarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h4\", 2);\n        i0.ɵɵtext(3, \"Solicitar Renova\\u00E7\\u00E3o\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 3)(5, \"p\", 4)(6, \"b\");\n        i0.ɵɵtext(7, \"Importante:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(8, \" A renova\\u00E7\\u00E3o do empr\\u00E9stimo \\u00E9 permitida apenas uma vez\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(9, \"div\");\n        i0.ɵɵelementStart(10, \"div\", 5)(11, \"p\", 6)(12, \"b\");\n        i0.ɵɵtext(13, \"Livro:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"p\", 6)(16, \"b\");\n        i0.ɵɵtext(17, \"Data atual de devolu\\u00E7\\u00E3o:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(18);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(19, \"div\", 7)(20, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function ModalRenovarComponent_Template_button_click_20_listener() {\n          return ctx.renovarEmprestimo();\n        });\n        i0.ɵɵtext(21, \"Renovar\");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵtextInterpolate1(\" \", ctx.acervoTituloParam, \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\" \", ctx.formatarData(ctx.dataPrevistaDevolucaoParam), \"\");\n      }\n    },\n    styles: [\".modal-content-vertical-large[_ngcontent-%COMP%]{text-align:center;background-color:#fff;padding:20px;display:flex;flex-direction:column;align-items:center;color:#000;width:450px;height:350px;justify-content:space-between}.btn-orange[_ngcontent-%COMP%]{background-color:#ff9d4e;border:none;transition:background-color .3s;color:#fff}.btn-orange[_ngcontent-%COMP%]:hover{background-color:#ffb07d;color:#fff}.modal-footer[_ngcontent-%COMP%]{position:relative;bottom:0;width:80%;text-align:center;display:block;margin-left:auto;margin-right:auto;margin-bottom:15px}.titulo[_ngcontent-%COMP%]{text-align:center;margin-bottom:0}.subtitulo[_ngcontent-%COMP%]{text-align:center;margin-bottom:0;margin-top:0}.reserve-button[_ngcontent-%COMP%]{width:50%}.modal-body[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:25px}.book-image[_ngcontent-%COMP%]{margin-top:10px}.form-check[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:30px;margin-bottom:50px}.form-check[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-bottom:10px}.form-check[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block}.book-info[_ngcontent-%COMP%]{text-align:left;margin-bottom:10px}.info[_ngcontent-%COMP%]{font-size:16px;margin-top:30px;text-align:left;float:right}\"]\n  });\n  return ModalRenovarComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}